webpackJsonp([26],{"./src/components/pages/TestResults/TestResults.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,n,o,r,u,i,c=l("./node_modules/babel-runtime/helpers/defineProperty.js"),d=a(c),m=l("./node_modules/babel-runtime/helpers/extends.js"),f=a(m),p=l("./node_modules/babel-runtime/helpers/classCallCheck.js"),E=a(p),N=l("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),T=a(N),v=l("./node_modules/babel-runtime/helpers/inherits.js"),h=a(v),R=l("./node_modules/recompose/compose.js"),S=a(R),b=l("./node_modules/recompose/lifecycle.js"),g=a(b),C=l("./node_modules/lodash/fp/size.js"),P=a(C),_=l("./node_modules/lodash/fp/isEmpty.js"),D=a(_),x=l("./node_modules/lodash/fp/toLower.js"),O=a(x),j=l("./node_modules/react/react.js"),y=a(j),M=l("./node_modules/prop-types/index.js"),A=a(M),L=l("./node_modules/react-bootstrap/es/index.js"),U=l("./node_modules/classnames/index.js"),w=a(U),I=l("./node_modules/redux/es/index.js"),k=l("./node_modules/react-redux/es/index.js"),V=l("./src/components/plugin-page-component/PluginListHeader.js"),Y=a(V),B=l("./src/components/plugin-page-component/PluginMainPanel.js"),F=a(B),K=l("./src/components/pages/TestResults/table-columns.config.js"),H=l("./src/components/pages/TestResults/forms.config.js"),q=l("./src/components/pages/TestResults/ducks/fetch-patient-test-results.duck.js"),z=l("./src/components/pages/TestResults/ducks/fetch-patient-test-results-detail.duck.js"),J=l("./src/utils/HOCs/fetch-patients.utils.js"),W=l("./src/components/pages/TestResults/selectors.js"),G=l("./src/config/client-urls.constants.js"),Q=l("./src/utils/plugin-helpers.utils.js"),X=l("./src/components/pages/TestResults/TestResultsDetail/TestResultsDetail.js"),Z=a(X),$=l("./src/utils/time-helpers.utils.js"),ee="testResultsMain",te="testResultPanel",le=function(e){return{actions:(0,I.bindActionCreators)({fetchPatientTestResultsRequest:q.fetchPatientTestResultsRequest,fetchPatientTestResultsDetailRequest:z.fetchPatientTestResultsDetailRequest},e)}},ae=(s=(0,k.connect)(W.patientTestResultsSelector,le),n=(0,k.connect)(W.patientTestResultsDetailSelector,le),o=(0,S.default)((0,g.default)(J.fetchPatientTestResultsOnMount),(0,g.default)(J.fetchPatientTestResultsDetailOnMount)),s(r=n(r=o((i=u=function(e){function t(){var l,a,s;(0,E.default)(this,t);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return l=a=(0,T.default)(this,e.call.apply(e,[this].concat(o))),a.state={nameShouldInclude:"",selectedColumns:K.defaultColumnsSelected,openedPanel:te,columnNameSortBy:H.valuesNames.NAME,sortingOrder:"asc",expandedPanel:"all",isBtnExpandVisible:!1,isAllPanelsVisible:!1,isDetailPanelVisible:!1,isSecondPanel:!1,isCreatePanelVisible:!1,editedPanel:{},offset:0,isSubmit:!1,isLoading:!0},a.handleExpand=function(e,t){t===ee?"all"===a.state.expandedPanel?a.setState({expandedPanel:e}):a.setState({expandedPanel:"all"}):"all"===a.state.expandedPanel?a.setState({expandedPanel:e,openedPanel:e}):a.setState({expandedPanel:"all"})},a.handleFilterChange=function(e){var t=e.target.value;return a.setState({nameShouldInclude:(0,O.default)(t)})},a.handleHeaderCellClick=function(e,t){var l=t.name,s=t.sortingOrder;return a.setState({columnNameSortBy:l,sortingOrder:s})},a.handleDetailTestResultsClick=function(e){var t=a.props,l=t.actions,s=t.userId;a.setState({isSecondPanel:!0,isDetailPanelVisible:!0,isBtnExpandVisible:!0,openedPanel:te,editedPanel:{},expandedPanel:"all",isLoading:!0}),l.fetchPatientTestResultsDetailRequest({userId:s,sourceId:e}),a.context.router.history.push(G.clientUrls.PATIENTS+"/"+s+"/"+G.clientUrls.TEST_RESULTS+"/"+e)},a.handleSetOffset=function(e){return a.setState({offset:e})},a.handleCreate=function(){},a.handleEdit=function(e){a.setState(function(t){return{editedPanel:(0,f.default)({},t.editedPanel,(0,d.default)({},e,!0)),isSubmit:!1}})},a.handleTestResultDetailCancel=function(e){a.setState(function(t){return{editedPanel:(0,f.default)({},t.editedPanel,(0,d.default)({},e,!1)),isSubmit:!1,isLoading:!0}})},a.handleSaveSettingsDetailForm=function(){},a.handleShow=function(e){a.setState({openedPanel:e})},a.formToShowCollection=function(e){var t=a.state,l=t.columnNameSortBy,s=t.sortingOrder,n=t.nameShouldInclude;return e=Q.operationsOnCollection.modificate(e,[{keyFrom:H.valuesNames.TAKEN,keyTo:H.valuesNames.TAKEN+"Convert",fn:$.getDDMMMYYYY},{keyFrom:H.valuesNames.DATE,keyTo:H.valuesNames.DATE+"Convert",fn:$.getDDMMMYYYY}]),Q.operationsOnCollection.filterAndSort({collection:e,filterBy:n,sortingByKey:l,sortingByOrder:s,filterKeys:[H.valuesNames.NAME,H.valuesNames.TAKEN+"Convert",H.valuesNames.DATE+"Convert",H.valuesNames.SOURCE]})},s=l,(0,T.default)(a,s)}return(0,h.default)(t,e),t.prototype.componentWillReceiveProps=function(){var e=this,t=this.context.router.route.match.params.sourceId,l=this.context.router.route.match.params.userId;this.context.router.history.location.pathname===G.clientUrls.PATIENTS+"/"+l+"/"+G.clientUrls.TEST_RESULTS+"/"+t&&void 0!==t&&this.setState({isSecondPanel:!0,isDetailPanelVisible:!0,isBtnExpandVisible:!0,isBtnCreateVisible:!0,isCreatePanelVisible:!1}),this.context.router.history.location.pathname===G.clientUrls.PATIENTS+"/"+l+"/"+G.clientUrls.TEST_RESULTS&&this.setState({isSecondPanel:!1,isBtnExpandVisible:!1,isBtnCreateVisible:!0,isCreatePanelVisible:!1,openedPanel:te,isDetailPanelVisible:!1,expandedPanel:"all"}),setTimeout(function(){e.setState({isLoading:!1})},500)},t.prototype.render=function(){var e=this.state,t=e.selectedColumns,l=e.columnNameSortBy,a=e.sortingOrder,s=e.isSecondPanel,n=e.isDetailPanelVisible,o=e.isBtnExpandVisible,r=e.expandedPanel,u=e.openedPanel,i=(e.isBtnCreateVisible,e.isCreatePanelVisible),c=e.editedPanel,d=e.offset,m=e.isSubmit,f=e.isLoading,p=this.props,E=p.allTestResults,N=p.testResultDetail,T="testResultsDetail"===r||r===te||"metaPanel"===r,v=r===ee,h="testResultsCreate"===r,R=K.columnsConfig.filter(function(e){return t[e.key]}),S=this.formToShowCollection(E),b=void 0;return n&&!(0,D.default)(N)&&(b=N.sourceId),y.default.createElement("section",{className:"page-wrapper"},y.default.createElement("div",{className:(0,w.default)("section",{"full-panel full-panel-main":v,"full-panel full-panel-details":T||h})},y.default.createElement(L.Row,null,v||"all"===r?y.default.createElement(L.Col,{xs:12,className:(0,w.default)({"col-panel-main":s})},y.default.createElement("div",{className:"panel panel-primary"},y.default.createElement(Y.default,{onFilterChange:this.handleFilterChange,panelTitle:"Test Results",isBtnExpandVisible:o,isBtnTableVisible:!1,name:ee,onExpand:this.handleExpand,currentPanel:ee}),y.default.createElement(F.default,{headers:R,resourceData:E,emptyDataMessage:"No test results",onHeaderCellClick:this.handleHeaderCellClick,onCellClick:this.handleDetailTestResultsClick,columnNameSortBy:l,sortingOrder:a,table:"testResults",filteredData:S,totalEntriesAmount:(0,P.default)(S),offset:d,setOffset:this.handleSetOffset,onCreate:this.handleCreate,id:b,isLoading:f}))):null,"all"!==r&&!T||!n||i?null:y.default.createElement(L.Col,{xs:12,className:(0,w.default)({"col-panel-details":s})},y.default.createElement(Z.default,{onExpand:this.handleExpand,name:"testResultsDetail",openedPanel:u,onShow:this.handleShow,expandedPanel:r,currentPanel:"testResultsDetail",detail:N,onEdit:this.handleEdit,editedPanel:c,onCancel:this.handleTestResultDetailCancel,onSaveSettings:this.handleSaveSettingsDetailForm,isSubmit:m})))))},t}(j.PureComponent),u.propTypes={allTestResults:A.default.arrayOf(A.default.object)},u.contextTypes={router:A.default.shape({history:A.default.object})},r=i))||r)||r)||r);t.default=ae},"./src/components/pages/TestResults/TestResultsDetail/TestResultsDetail.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=a(s),o=l("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),r=a(o),u=l("./node_modules/babel-runtime/helpers/inherits.js"),i=a(u),c=l("./node_modules/react/react.js"),d=a(c),m=l("./src/components/plugin-page-component/PluginDetailPanel.js"),f=a(m),p=l("./src/utils/time-helpers.utils.js"),E=l("./src/components/pages/TestResults/forms.config.js"),N=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,e.apply(this,arguments))}return(0,i.default)(t,e),t.prototype.getListOfResult=function(e){if(!e)return null;var t=[];return e.forEach(function(e,l,a){if(l%2==0){var s=[e];a[l+1]&&s.push(a[l+1]),t.push(s)}}),t},t.prototype.render=function(){var e=this.props,t=e.onExpand,l=e.onShow,a=e.openedPanel,s=e.expandedPanel,n=e.currentPanel,o=e.onEdit,r=e.editedPanel,u=e.onCancel,i=e.onSaveSettings,c=e.testResultsDetailFormValues,m=this.props.detail;m=m||{};var N=(0,p.getDDMMMYYYY)(m[E.valuesNames.TAKEN]),T=(0,p.getDDMMMYYYY)(m[E.valuesNames.DATE]),v=this.getListOfResult(m[E.valuesNames.TR]);return d.default.createElement("div",{className:"section-detail"},d.default.createElement("div",{className:"panel-group accordion"},"testResultPanel"!==s&&"all"!==s||r.testResultPanel?null:d.default.createElement(f.default,{onExpand:t,name:"testResultPanel",title:"Test Result",onShow:l,isOpen:"testResultPanel"===a,currentPanel:n,onEdit:o,editedPanel:r,onCancel:u,onSaveSettings:i,formValues:c,isBtnShowPanel:!0,isShowControlPanel:!1},d.default.createElement("div",{className:"panel-body-inner"},d.default.createElement("div",{className:"form"},d.default.createElement("div",{className:"form-group-wrapper"},d.default.createElement("div",{className:"row-expand"},d.default.createElement("div",{className:"col-expand-left"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.NAME),d.default.createElement("div",{className:"form-control-static"},m[E.valuesNames.NAME])))),d.default.createElement("div",{className:"row-expand"},d.default.createElement("div",{className:"col-expand-left"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.STATUS),d.default.createElement("div",{className:"form-control-static"},m[E.valuesNames.STATUS]))),d.default.createElement("div",{className:"col-expand-right"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TAKEN),d.default.createElement("div",{className:"form-control-static"},N)))),d.default.createElement("div",{className:"row-expand"},d.default.createElement("div",{className:"col-expand-left"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.CONCLUSION),d.default.createElement("div",{className:"form-control-static"},m[E.valuesNames.CONCLUSION])))),d.default.createElement("div",{className:"row-expand"},d.default.createElement("div",{className:"col-expand-left"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.AUTHOR),d.default.createElement("div",{className:"form-control-static"},m[E.valuesNames.AUTHOR]))),d.default.createElement("div",{className:"col-expand-right"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.DATE),d.default.createElement("div",{className:"form-control-static"},T)))),d.default.createElement("div",{className:"row-expand"},d.default.createElement("div",{className:"col-expand-left"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.SOURCE),d.default.createElement("div",{className:"form-control-static"},m[E.valuesNames.SOURCE])))))))),"metaPanel"===s||"all"===s?d.default.createElement(f.default,{onExpand:t,name:"metaPanel",title:"Results ("+(m[E.valuesNames.TR]&&m[E.valuesNames.TR].length||0)+")",isOpen:"metaPanel"===a,onShow:l,currentPanel:n,onEdit:o,editedPanel:r,onCancel:u,onSaveSettings:i,formValues:!0,isBtnShowPanel:!0,isShowControlPanel:!1},d.default.createElement("div",{className:"panel-expand-wrapper"},v&&v.length?v.map(function(e,t){return d.default.createElement("div",{className:"panel-expand-row",key:"row-"+t},e.map(function(e,t){return d.default.createElement("div",{className:"panel-expand-item",key:"row-"+t},d.default.createElement("div",{className:"panel-body-inner"},d.default.createElement("div",{className:"form"},d.default.createElement("div",{className:"form-group-wrapper"},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TR_RESULT),d.default.createElement("div",{className:"form-control-static"},e[E.valuesNames.TR_RESULT])),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TR_VALUE),d.default.createElement("div",{className:"form-control-static"},e[E.valuesNames.TR_VALUE])),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TR_UNIT),d.default.createElement("div",{className:"form-control-static"},e[E.valuesNames.TR_UNIT])),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TR_NORMAL),d.default.createElement("div",{className:"form-control-static"},e[E.valuesNames.TR_NORMAL])),e[E.valuesNames.TR_COMMENT]?d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{className:"control-label"},E.valuesLabels.TR_COMMENT),d.default.createElement("div",{className:"form-control-static"},e[E.valuesNames.TR_COMMENT])):null))))}))}):d.default.createElement("div",{className:"panel-body-inner"},d.default.createElement("div",{className:"form"},d.default.createElement("div",{className:"form-group-wrapper"},d.default.createElement("div",{className:"form-group"},d.default.createElement("div",{className:"form-control-static"},"No results"))))))):null))},t}(c.PureComponent);t.default=N},"./src/components/pages/TestResults/forms.config.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.valuesNames={NAME:"testName",STATUS:"status",TAKEN:"sampleTaken",CONCLUSION:"conclusion",AUTHOR:"author",DATE:"dateCreated",TR:"testResults",TR_RESULT:"result",TR_VALUE:"value",TR_UNIT:"unit",TR_NORMAL:"normalRange",TR_COMMENT:"comment",SOURCE:"source",SOURCE_ID:"sourceId"},t.valuesLabels={NAME:"Test Name",STATUS:"Status",TAKEN:"Sample Taken",CONCLUSION:"Conclusion",AUTHOR:"Author",DATE:"Date",TR:"Test Results",TR_RESULT:"Results",TR_VALUE:"Value",TR_UNIT:"Unit",TR_NORMAL:"Normal Range",TR_COMMENT:"Comment",SOURCE:"Source",SOURCE_ID:"Source ID"}},"./src/components/pages/TestResults/selectors.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patientTestResultsDetailSelector=t.patientTestResultsSelector=void 0;var a=l("./node_modules/lodash/fp/getOr.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),n=l("./node_modules/reselect/lib/index.js"),o=l("./src/utils/plugin-helpers.utils.js"),r=l("./src/components/pages/TestResults/forms.config.js"),u=(0,n.createSelector)(function(e){return e.patientsTestResults},function(e,t){return(0,s.default)(null,"match.params.userId",t)},function(e,t){var l=o.operationsOnCollection.modificateDateForTable(e[t],r.valuesNames.TAKEN);return l=o.operationsOnCollection.modificateDateForTable(l,r.valuesNames.DATE),{allTestResults:l,userId:t}}),i=(0,n.createSelector)(function(e){return e.testResultsDetail},function(e,t){return(0,s.default)(null,"match.params.userId",t)},function(e,t){return{testResultDetail:e[t],userId:t}});t.patientTestResultsSelector=u,t.patientTestResultsDetailSelector=i},"./src/components/pages/TestResults/table-columns.config.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultColumnsSelected=t.columnsConfig=void 0;var a=l("./src/utils/time-helpers.utils.js");t.columnsConfig=[{key:"testName",title:"Test Name",width:"30%"},{key:"sampleTaken",title:"Sample Taken",transformer:a.getDDMMMYYYY,width:"26%"},{key:"dateCreated",title:"Date Created",transformer:a.getDDMMMYYYY,width:"25%"},{key:"source",title:"Source",width:"19%"},{key:"sourceId",title:"SourceID",display:"none"}],t.defaultColumnsSelected={testName:!0,sampleTaken:!0,dateCreated:!0,source:!0,sourceId:!0}}});